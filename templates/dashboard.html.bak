<!DOCTYPE html>
<html lang="en" data-theme="corporate">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Gateway - Token Management</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        .stat-card { transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="bg-base-200 min-h-screen">
    <!-- Navbar -->
    <div class="navbar bg-base-100 shadow-md px-6">
        <div class="flex-1">
            <a href="/admin/dashboard" class="text-xl font-bold">API Gateway</a>
            <span class="badge badge-primary ml-2">Admin</span>
        </div>
        <div class="flex-none gap-2">
            <span id="adminName" class="text-sm"></span>
            <button onclick="handleLogout()" class="btn btn-ghost btn-sm">Logout</button>
        </div>
    </div>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-base-100 min-h-[calc(100vh-4rem)] shadow-sm p-4">
            <ul class="menu">
                <li><a onclick="showSection('dashboard')" class="menu-item active" id="nav-dashboard">Dashboard</a></li>
                <li><a onclick="showSection('tokens')" class="menu-item" id="nav-tokens">API Tokens</a></li>
                <li><a onclick="showSection('analytics')" class="menu-item" id="nav-analytics">Analytics</a></li>
                <li><a onclick="showSection('audit')" class="menu-item" id="nav-audit">Audit Logs</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            <!-- Dashboard Section -->
            <div id="section-dashboard">
                <h2 class="text-2xl font-bold mb-6">Dashboard Overview</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="stat bg-base-100 rounded-lg shadow stat-card">
                        <div class="stat-title">Total Tokens</div>
                        <div class="stat-value text-primary" id="stat-total">0</div>
                    </div>
                    <div class="stat bg-base-100 rounded-lg shadow stat-card">
                        <div class="stat-title">Active Tokens</div>
                        <div class="stat-value text-success" id="stat-active">0</div>
                    </div>
                    <div class="stat bg-base-100 rounded-lg shadow stat-card">
                        <div class="stat-title">Requests (24h)</div>
                        <div class="stat-value text-info" id="stat-requests">0</div>
                    </div>
                    <div class="stat bg-base-100 rounded-lg shadow stat-card">
                        <div class="stat-title">Success Rate</div>
                        <div class="stat-value text-warning" id="stat-success">0%</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="card bg-base-100 shadow">
                        <div class="card-body">
                            <h3 class="card-title text-lg">Daily Requests (Last 7 Days)</h3>
                            <canvas id="dailyChart" height="200"></canvas>
                        </div>
                    </div>
                    <div class="card bg-base-100 shadow">
                        <div class="card-body">
                            <h3 class="card-title text-lg">Top Endpoints</h3>
                            <div class="overflow-x-auto">
                                <table class="table table-sm" id="endpointsTable">
                                    <thead><tr><th>Endpoint</th><th>Method</th><th>Requests</th><th>Avg Time</th></tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tokens Section -->
            <div id="section-tokens" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">API Tokens</h2>
                    <button onclick="showCreateTokenModal()" class="btn btn-primary btn-sm">+ Create Token</button>
                </div>

                <div class="card bg-base-100 shadow">
                    <div class="card-body p-0">
                        <div class="overflow-x-auto">
                            <table class="table" id="tokensTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Token</th>
                                        <th>Environment</th>
                                        <th>Status</th>
                                        <th>Requests</th>
                                        <th>Last Used</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="tokensBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="section-analytics" class="hidden">
                <h2 class="text-2xl font-bold mb-6">Analytics</h2>
                <div class="card bg-base-100 shadow mb-6">
                    <div class="card-body">
                        <h3 class="card-title text-lg">Request Volume</h3>
                        <canvas id="analyticsChart" height="300"></canvas>
                    </div>
                </div>
                <div class="card bg-base-100 shadow">
                    <div class="card-body">
                        <h3 class="card-title text-lg">Endpoint Performance</h3>
                        <div class="overflow-x-auto">
                            <table class="table" id="analyticsEndpointsTable">
                                <thead><tr><th>Endpoint</th><th>Method</th><th>Requests</th><th>Success</th><th>Failed</th><th>Avg Time (ms)</th></tr></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Audit Logs Section -->
            <div id="section-audit" class="hidden">
                <h2 class="text-2xl font-bold mb-6">Audit Logs</h2>
                <div class="card bg-base-100 shadow">
                    <div class="card-body p-0">
                        <div class="overflow-x-auto">
                            <table class="table" id="auditTable">
                                <thead><tr><th>Time</th><th>Action</th><th>Resource</th><th>Description</th><th>IP</th></tr></thead>
                                <tbody id="auditBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Token Modal -->
    <dialog id="createTokenModal" class="modal">
        <div class="modal-box w-11/12 max-w-2xl">
            <h3 class="font-bold text-lg mb-4">Create New API Token</h3>
            <form id="createTokenForm" onsubmit="handleCreateToken(event)">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control">
                        <label class="label"><span class="label-text">Token Name *</span></label>
                        <input type="text" name="name" class="input input-bordered" required placeholder="e.g. Production App" />
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text">Environment *</span></label>
                        <select name="environment" class="select select-bordered" required>
                            <option value="production">Production</option>
                            <option value="staging">Staging</option>
                            <option value="development" selected>Development</option>
                            <option value="test">Test</option>
                        </select>
                    </div>
                    <div class="form-control md:col-span-2">
                        <label class="label"><span class="label-text">Description</span></label>
                        <textarea name="description" class="textarea textarea-bordered" placeholder="What is this token for?"></textarea>
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text">Scopes (comma-separated)</span></label>
                        <input type="text" name="scopes" class="input input-bordered" placeholder="tickets:read, machines:write" />
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text">Expiration Date</span></label>
                        <input type="datetime-local" name="expires_at" class="input input-bordered" />
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text">Rate Limit / Minute</span></label>
                        <input type="number" name="rate_limit_per_minute" class="input input-bordered" value="100" />
                    </div>
                    <div class="form-control">
                        <label class="label"><span class="label-text">Rate Limit / Hour</span></label>
                        <input type="number" name="rate_limit_per_hour" class="input input-bordered" value="5000" />
                    </div>
                    <div class="form-control md:col-span-2">
                        <label class="label"><span class="label-text">IP Whitelist (comma-separated, leave empty for all)</span></label>
                        <input type="text" name="ip_whitelist" class="input input-bordered" placeholder="192.168.1.1, 10.0.0.0/8" />
                    </div>
                </div>
                <div class="modal-action">
                    <button type="button" class="btn" onclick="document.getElementById('createTokenModal').close()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Token</button>
                </div>
            </form>
        </div>
        <form method="dialog" class="modal-backdrop"><button>close</button></form>
    </dialog>

    <!-- Token Created Modal -->
    <dialog id="tokenCreatedModal" class="modal">
        <div class="modal-box">
            <h3 class="font-bold text-lg text-success mb-4">Token Created Successfully!</h3>
            <div class="alert alert-warning mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z" />
                </svg>
                <span>Save this token now! It won't be shown again.</span>
            </div>
            <div class="form-control">
                <label class="label"><span class="label-text font-bold">Your API Token:</span></label>
                <div class="join w-full">
                    <input type="text" id="newTokenValue" class="input input-bordered join-item w-full font-mono text-sm" readonly />
                    <button class="btn join-item" onclick="copyToken()">Copy</button>
                </div>
            </div>
            <div class="modal-action">
                <button class="btn btn-primary" onclick="document.getElementById('tokenCreatedModal').close(); loadTokens();">Done</button>
            </div>
        </div>
    </dialog>

    <!-- Token Detail Modal -->
    <dialog id="tokenDetailModal" class="modal">
        <div class="modal-box w-11/12 max-w-4xl">
            <h3 class="font-bold text-lg mb-4" id="tokenDetailTitle">Token Details</h3>
            <div id="tokenDetailContent"></div>
            <div class="modal-action">
                <button class="btn" onclick="document.getElementById('tokenDetailModal').close()">Close</button>
            </div>
        </div>
        <form method="dialog" class="modal-backdrop"><button>close</button></form>
    </dialog>

    <script>
        const API_BASE = '/api/v1/admin';
        let dailyChartInstance = null;
        let analyticsChartInstance = null;

        function getHeaders() {
            const token = localStorage.getItem('session_token');
            return {
                'Content-Type': 'application/json',
                'X-Session-Token': token || ''
            };
        }

        async function apiFetch(url, options = {}) {
            options.headers = { ...getHeaders(), ...options.headers };
            const resp = await fetch(url, options);
            if (resp.status === 401) {
                localStorage.removeItem('session_token');
                window.location.href = '/admin/login';
                return null;
            }
            return resp.json();
        }

        // Auth check
        if (!localStorage.getItem('session_token')) {
            window.location.href = '/admin/login';
        }

        // Show admin name
        try {
            const user = JSON.parse(localStorage.getItem('admin_user') || '{}');
            document.getElementById('adminName').textContent = user.username || 'Admin';
        } catch(e) {}

        async function handleLogout() {
            await apiFetch(`${API_BASE}/auth/logout`, { method: 'POST' });
            localStorage.removeItem('session_token');
            localStorage.removeItem('admin_user');
            window.location.href = '/admin/login';
        }

        // Navigation
        function showSection(section) {
            ['dashboard', 'tokens', 'analytics', 'audit'].forEach(s => {
                document.getElementById(`section-${s}`).classList.toggle('hidden', s !== section);
                document.getElementById(`nav-${s}`).classList.toggle('active', s === section);
            });
            if (section === 'dashboard') loadDashboard();
            if (section === 'tokens') loadTokens();
            if (section === 'analytics') loadAnalytics();
            if (section === 'audit') loadAuditLogs();
        }

        // Dashboard
        async function loadDashboard() {
            const data = await apiFetch(`${API_BASE}/analytics/dashboard`);
            if (!data || !data.success) return;
            const s = data.data;
            document.getElementById('stat-total').textContent = s.total_tokens || 0;
            document.getElementById('stat-active').textContent = s.active_tokens || 0;
            document.getElementById('stat-requests').textContent = (s.total_requests_24h || 0).toLocaleString();
            document.getElementById('stat-success').textContent = (s.success_rate || 0).toFixed(1) + '%';

            // Load daily chart
            const daily = await apiFetch(`${API_BASE}/analytics/daily?days=7`);
            if (daily && daily.success && daily.data.length > 0) {
                const labels = [...new Set(daily.data.map(d => d.date))].sort();
                const counts = labels.map(l => daily.data.filter(d => d.date === l).reduce((a, b) => a + b.request_count, 0));
                renderDailyChart(labels, counts);
            }

            // Load endpoints
            const endpoints = await apiFetch(`${API_BASE}/analytics/endpoints?days=7&limit=10`);
            if (endpoints && endpoints.success) {
                const tbody = document.querySelector('#endpointsTable tbody');
                tbody.innerHTML = endpoints.data.map(e =>
                    `<tr><td class="font-mono text-xs">${e.endpoint}</td><td><span class="badge badge-sm">${e.method}</span></td><td>${e.request_count}</td><td>${(e.avg_response_time_ms || 0).toFixed(0)}ms</td></tr>`
                ).join('') || '<tr><td colspan="4" class="text-center text-base-content/50">No data</td></tr>';
            }
        }

        function renderDailyChart(labels, data) {
            if (dailyChartInstance) dailyChartInstance.destroy();
            const ctx = document.getElementById('dailyChart').getContext('2d');
            dailyChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels,
                    datasets: [{ label: 'Requests', data, backgroundColor: 'rgba(59, 130, 246, 0.5)', borderColor: 'rgb(59, 130, 246)', borderWidth: 1 }]
                },
                options: { responsive: true, scales: { y: { beginAtZero: true } } }
            });
        }

        // Tokens
        async function loadTokens() {
            const data = await apiFetch(`${API_BASE}/tokens`);
            if (!data || !data.success) return;
            const tbody = document.getElementById('tokensBody');
            tbody.innerHTML = data.data.map(t => {
                const statusBadge = t.is_active
                    ? '<span class="badge badge-success badge-sm">Active</span>'
                    : '<span class="badge badge-error badge-sm">Disabled</span>';
                const envBadge = { production: 'badge-primary', staging: 'badge-warning', development: 'badge-info', test: 'badge-ghost' }[t.environment] || 'badge-ghost';
                const lastUsed = t.last_used_at && t.last_used_at !== '0001-01-01T00:00:00Z' ? new Date(t.last_used_at).toLocaleDateString() : 'Never';
                return `<tr>
                    <td><div class="font-bold">${t.name}</div><div class="text-xs text-base-content/50">${t.description || ''}</div></td>
                    <td class="font-mono text-xs">${t.token}</td>
                    <td><span class="badge ${envBadge} badge-sm">${t.environment}</span></td>
                    <td>${statusBadge}</td>
                    <td>${(t.total_requests || 0).toLocaleString()}</td>
                    <td class="text-sm">${lastUsed}</td>
                    <td>
                        <div class="flex gap-1">
                            <button class="btn btn-ghost btn-xs" onclick="viewTokenDetail(${t.id})">View</button>
                            ${t.is_active
                                ? `<button class="btn btn-warning btn-xs" onclick="toggleToken(${t.id}, false)">Disable</button>`
                                : `<button class="btn btn-success btn-xs" onclick="toggleToken(${t.id}, true)">Enable</button>`}
                            <button class="btn btn-error btn-xs" onclick="deleteToken(${t.id}, '${t.name}')">Delete</button>
                        </div>
                    </td>
                </tr>`;
            }).join('') || '<tr><td colspan="7" class="text-center py-8 text-base-content/50">No tokens found. Create your first token!</td></tr>';
        }

        function showCreateTokenModal() {
            document.getElementById('createTokenForm').reset();
            document.getElementById('createTokenModal').showModal();
        }

        async function handleCreateToken(e) {
            e.preventDefault();
            const form = new FormData(e.target);
            const body = {
                name: form.get('name'),
                description: form.get('description'),
                environment: form.get('environment'),
                scopes: form.get('scopes') ? form.get('scopes').split(',').map(s => s.trim()).filter(Boolean) : [],
                ip_whitelist: form.get('ip_whitelist') ? form.get('ip_whitelist').split(',').map(s => s.trim()).filter(Boolean) : [],
                rate_limit_per_minute: parseInt(form.get('rate_limit_per_minute')) || 100,
                rate_limit_per_hour: parseInt(form.get('rate_limit_per_hour')) || 5000,
                rate_limit_per_day: 100000
            };
            if (form.get('expires_at')) {
                body.expires_at = new Date(form.get('expires_at')).toISOString();
            }

            const data = await apiFetch(`${API_BASE}/tokens`, { method: 'POST', body: JSON.stringify(body) });
            if (!data) return;
            document.getElementById('createTokenModal').close();

            if (data.success) {
                document.getElementById('newTokenValue').value = data.data.token;
                document.getElementById('tokenCreatedModal').showModal();
            } else {
                alert(data.message || 'Failed to create token');
            }
        }

        function copyToken() {
            const input = document.getElementById('newTokenValue');
            input.select();
            navigator.clipboard.writeText(input.value);
            const btn = input.nextElementSibling;
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 2000);
        }

        async function toggleToken(id, enable) {
            const action = enable ? 'enable' : 'disable';
            await apiFetch(`${API_BASE}/tokens/${id}/${action}`, { method: 'PATCH' });
            loadTokens();
        }

        async function deleteToken(id, name) {
            if (!confirm(`Delete token "${name}"? This cannot be undone.`)) return;
            await apiFetch(`${API_BASE}/tokens/${id}`, { method: 'DELETE' });
            loadTokens();
        }

        async function viewTokenDetail(id) {
            const tokenData = await apiFetch(`${API_BASE}/tokens/${id}`);
            const analyticsData = await apiFetch(`${API_BASE}/analytics/tokens/${id}?days=30`);
            const logsData = await apiFetch(`${API_BASE}/tokens/${id}/logs?limit=20`);

            if (!tokenData || !tokenData.success) return;
            const t = tokenData.data;
            const a = analyticsData && analyticsData.success ? analyticsData.data : {};
            const logs = logsData && logsData.success ? logsData.data : [];

            document.getElementById('tokenDetailTitle').textContent = t.name;
            document.getElementById('tokenDetailContent').innerHTML = `
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="stat bg-base-200 rounded-lg p-3">
                        <div class="stat-title text-xs">Total Requests</div>
                        <div class="stat-value text-lg">${(a.total_requests || 0).toLocaleString()}</div>
                    </div>
                    <div class="stat bg-base-200 rounded-lg p-3">
                        <div class="stat-title text-xs">Success</div>
                        <div class="stat-value text-lg text-success">${(a.successful_requests || 0).toLocaleString()}</div>
                    </div>
                    <div class="stat bg-base-200 rounded-lg p-3">
                        <div class="stat-title text-xs">Failed</div>
                        <div class="stat-value text-lg text-error">${(a.failed_requests || 0).toLocaleString()}</div>
                    </div>
                    <div class="stat bg-base-200 rounded-lg p-3">
                        <div class="stat-title text-xs">Avg Response</div>
                        <div class="stat-value text-lg">${(a.avg_response_time_ms || 0).toFixed(0)}ms</div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div><strong>Environment:</strong> <span class="badge badge-sm">${t.environment}</span></div>
                    <div><strong>Status:</strong> ${t.is_active ? '<span class="badge badge-success badge-sm">Active</span>' : '<span class="badge badge-error badge-sm">Disabled</span>'}</div>
                    <div><strong>Created:</strong> ${new Date(t.created_at).toLocaleString()}</div>
                    <div><strong>Rate Limits:</strong> ${t.rate_limit_per_minute}/min, ${t.rate_limit_per_hour}/hr</div>
                    <div><strong>Unique IPs:</strong> ${a.unique_ips || 0}</div>
                    <div><strong>Unique Endpoints:</strong> ${a.unique_endpoints || 0}</div>
                </div>
                <h4 class="font-bold mb-2">Recent Requests</h4>
                <div class="overflow-x-auto">
                    <table class="table table-sm">
                        <thead><tr><th>Time</th><th>Method</th><th>Endpoint</th><th>Status</th><th>Time (ms)</th><th>IP</th></tr></thead>
                        <tbody>
                            ${logs.map(l => `<tr>
                                <td class="text-xs">${new Date(l.created_at).toLocaleString()}</td>
                                <td><span class="badge badge-sm">${l.method}</span></td>
                                <td class="font-mono text-xs">${l.endpoint}</td>
                                <td><span class="badge badge-sm ${l.status_code < 300 ? 'badge-success' : l.status_code < 500 ? 'badge-warning' : 'badge-error'}">${l.status_code}</span></td>
                                <td>${l.response_time_ms || 0}</td>
                                <td class="text-xs">${l.ip_address}</td>
                            </tr>`).join('') || '<tr><td colspan="6" class="text-center text-base-content/50">No recent requests</td></tr>'}
                        </tbody>
                    </table>
                </div>
            `;
            document.getElementById('tokenDetailModal').showModal();
        }

        // Analytics
        async function loadAnalytics() {
            const daily = await apiFetch(`${API_BASE}/analytics/daily?days=30`);
            if (daily && daily.success && daily.data.length > 0) {
                const labels = [...new Set(daily.data.map(d => d.date))].sort();
                const success = labels.map(l => daily.data.filter(d => d.date === l).reduce((a, b) => a + b.successful_requests, 0));
                const failed = labels.map(l => daily.data.filter(d => d.date === l).reduce((a, b) => a + b.failed_requests, 0));

                if (analyticsChartInstance) analyticsChartInstance.destroy();
                const ctx = document.getElementById('analyticsChart').getContext('2d');
                analyticsChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels,
                        datasets: [
                            { label: 'Success', data: success, borderColor: 'rgb(34, 197, 94)', backgroundColor: 'rgba(34, 197, 94, 0.1)', fill: true },
                            { label: 'Failed', data: failed, borderColor: 'rgb(239, 68, 68)', backgroundColor: 'rgba(239, 68, 68, 0.1)', fill: true }
                        ]
                    },
                    options: { responsive: true, scales: { y: { beginAtZero: true } } }
                });
            }

            const endpoints = await apiFetch(`${API_BASE}/analytics/endpoints?days=30&limit=20`);
            if (endpoints && endpoints.success) {
                const tbody = document.querySelector('#analyticsEndpointsTable tbody');
                tbody.innerHTML = endpoints.data.map(e =>
                    `<tr><td class="font-mono text-xs">${e.endpoint}</td><td><span class="badge badge-sm">${e.method}</span></td><td>${e.request_count}</td><td class="text-success">${e.successful_requests}</td><td class="text-error">${e.failed_requests}</td><td>${(e.avg_response_time_ms || 0).toFixed(1)}</td></tr>`
                ).join('') || '<tr><td colspan="6" class="text-center text-base-content/50">No data</td></tr>';
            }
        }

        // Audit Logs
        async function loadAuditLogs() {
            const data = await apiFetch(`${API_BASE}/audit-logs?limit=100`);
            if (!data || !data.success) return;
            const tbody = document.getElementById('auditBody');
            tbody.innerHTML = data.data.map(l => {
                const actionBadge = {
                    create_token: 'badge-success', delete_token: 'badge-error', disable_token: 'badge-warning',
                    enable_token: 'badge-info', update_token: 'badge-primary'
                }[l.action] || 'badge-ghost';
                return `<tr>
                    <td class="text-xs">${new Date(l.created_at).toLocaleString()}</td>
                    <td><span class="badge ${actionBadge} badge-sm">${l.action}</span></td>
                    <td>${l.resource_type}${l.resource_id ? ' #' + l.resource_id : ''}</td>
                    <td class="text-sm">${l.description || '-'}</td>
                    <td class="text-xs">${l.ip_address || '-'}</td>
                </tr>`;
            }).join('') || '<tr><td colspan="5" class="text-center text-base-content/50">No audit logs</td></tr>';
        }

        // Initial load
        loadDashboard();
    </script>
</body>
</html>
