{
    "swagger": "2.0",
    "info": {
        "description": "This API Gateway provides a single unified endpoint /api/v1/data that joins ticket_master.dbo.open_ticket with machine_master.dbo.machine and applies vendor-scoped access control from the API token.",
        "title": "API Gateway for On-Premise to Cloud Communication",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.example.com/support",
            "email": "support@example.com"
        },
        "license": {
            "name": "Proprietary",
            "url": "http://www.example.com/license"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/data": {
            "get": {
                "security": [{"ApiKeyAuth": []}],
                "description": "Retrieve joined ticket+machine rows with pagination, sorting, and filtering. Vendor-scoped tokens only see rows matching their filter column/value. Admin/Internal tokens (is_super_token=true) see all rows via the customizable admin query in repository/queries/admin_data_query.go.",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Data"],
                "summary": "Get all data",
                "parameters": [
                    {
                        "type": "integer",
                        "minimum": 1,
                        "description": "Page number (omit for all results)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 500,
                        "description": "Items per page (default: 100, max: 500)",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Sort field: terminal_id, terminal_name, priority, mode, status, incident_start_datetime, count, balance, tickets_duration, open_time, close_time, flm_name, flm, slm, net (default: incident_start_datetime)",
                        "name": "sort_by",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "enum": ["asc", "desc"],
                        "description": "Sort direction: asc or desc (default: desc)",
                        "name": "sort_order",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Search by terminal_id or terminal_name (partial match)",
                        "name": "search",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by exact status value (e.g. 0.NEW)",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by exact mode value (e.g. Off-line)",
                        "name": "mode",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filter by exact priority value (e.g. 1.High)",
                        "name": "priority",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Data retrieved successfully",
                        "schema": {"$ref": "#/definitions/models.DataListResponse"}
                    },
                    "401": {
                        "description": "Missing or invalid API token",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    },
                    "429": {
                        "description": "Rate limit exceeded",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    }
                }
            }
        },
        "/data/metadata": {
            "get": {
                "security": [{"ApiKeyAuth": []}],
                "description": "Retrieve all valid values for status, mode, and priority fields from the database. Values are cached for 1 hour.",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Data"],
                "summary": "Get field metadata",
                "responses": {
                    "200": {
                        "description": "Metadata retrieved successfully",
                        "schema": {"$ref": "#/definitions/models.MetadataResponse"}
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    }
                }
            }
        },
        "/data/{terminal_id}": {
            "get": {
                "security": [{"ApiKeyAuth": []}],
                "description": "Retrieve a single joined row by terminal ID. Vendor tokens return 404 if the terminal is outside their scope.",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Data"],
                "summary": "Get data by terminal ID",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Terminal ID",
                        "name": "terminal_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Data retrieved successfully",
                        "schema": {"$ref": "#/definitions/models.DataResponse"}
                    },
                    "404": {
                        "description": "Not found (or outside vendor scope)",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    }
                }
            },
            "put": {
                "security": [{"ApiKeyAuth": []}],
                "description": "Update ticket fields for a terminal. Vendor tokens can only update terminals within their scope (returns 403 otherwise). Admin/Internal tokens can update any terminal.",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Data"],
                "summary": "Update ticket fields",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Terminal ID",
                        "name": "terminal_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Fields to update",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {"$ref": "#/definitions/models.DataUpdateRequest"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Updated successfully",
                        "schema": {"$ref": "#/definitions/models.DataResponse"}
                    },
                    "400": {
                        "description": "Invalid request / no fields to update",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    },
                    "403": {
                        "description": "Terminal is outside the vendor token scope",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    },
                    "404": {
                        "description": "Terminal not found",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    },
                    "500": {
                        "description": "Internal server error",
                        "schema": {"$ref": "#/definitions/models.ErrorResponse"}
                    }
                }
            }
        },
        "/admin/analytics/daily": {
            "get": {
                "description": "Get daily request volume",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Analytics"],
                "summary": "Get Daily Usage",
                "parameters": [
                    {"type": "integer", "description": "Number of days (default 30)", "name": "days", "in": "query"},
                    {"type": "integer", "description": "Filter by Token ID", "name": "token_id", "in": "query"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/analytics/dashboard": {
            "get": {
                "description": "Get overview statistics for the admin dashboard",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Analytics"],
                "summary": "Get Dashboard Stats",
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/analytics/endpoints": {
            "get": {
                "description": "Get usage statistics by endpoint",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Analytics"],
                "summary": "Get Endpoint Stats",
                "parameters": [
                    {"type": "integer", "description": "Number of days (default 7)", "name": "days", "in": "query"},
                    {"type": "integer", "description": "Limit results (default 20)", "name": "limit", "in": "query"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/analytics/tokens/{id}": {
            "get": {
                "description": "Get detailed analytics for a specific token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Analytics"],
                "summary": "Get Token Analytics",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true},
                    {"type": "integer", "description": "Number of days (default 7)", "name": "days", "in": "query"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/audit-logs": {
            "get": {
                "description": "Get administrative audit logs",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Admin Auth"],
                "summary": "Get Audit Logs",
                "parameters": [
                    {"type": "integer", "description": "Limit results (default 100)", "name": "limit", "in": "query"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/auth/login": {
            "post": {
                "description": "Authenticate admin user and return session token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Admin Auth"],
                "summary": "Admin Login",
                "parameters": [
                    {"description": "Login Credentials", "in": "body", "name": "login", "required": true, "schema": {"$ref": "#/definitions/models.LoginRequest"}}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"$ref": "#/definitions/models.LoginResponse"}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "401": {"description": "Unauthorized", "schema": {"$ref": "#/definitions/models.LoginResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/auth/logout": {
            "post": {
                "description": "Invalidate current session",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Admin Auth"],
                "summary": "Admin Logout",
                "parameters": [
                    {"type": "string", "description": "Session Token", "name": "X-Session-Token", "in": "header"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}}
                }
            }
        },
        "/admin/auth/me": {
            "get": {
                "description": "Get details of currently logged in admin",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Admin Auth"],
                "summary": "Get Current User",
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}}
                }
            }
        },
        "/admin/tokens": {
            "get": {
                "description": "Get all API tokens",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "List API Tokens",
                "responses": {
                    "200": {"description": "OK", "schema": {"$ref": "#/definitions/models.TokenListResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            },
            "post": {
                "description": "Create a new API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Create API Token",
                "parameters": [
                    {"description": "Token Details", "in": "body", "name": "token", "required": true, "schema": {"$ref": "#/definitions/models.CreateTokenRequest"}}
                ],
                "responses": {
                    "201": {"description": "Created", "schema": {"$ref": "#/definitions/models.CreateTokenResponse"}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/tokens/{id}": {
            "get": {
                "description": "Get details of a specific API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Get API Token",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"$ref": "#/definitions/models.TokenResponse"}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "404": {"description": "Not Found", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            },
            "put": {
                "description": "Update details of an existing API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Update API Token",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true},
                    {"description": "Update Details", "in": "body", "name": "token", "required": true, "schema": {"$ref": "#/definitions/models.UpdateTokenRequest"}}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"$ref": "#/definitions/models.TokenResponse"}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            },
            "delete": {
                "description": "Permanently delete an API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Delete API Token",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/tokens/{id}/disable": {
            "patch": {
                "description": "Temporarily disable an API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Disable API Token",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/tokens/{id}/enable": {
            "patch": {
                "description": "Re-enable a disabled API token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Token Management"],
                "summary": "Enable API Token",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/admin/tokens/{id}/logs": {
            "get": {
                "description": "Get access logs for a specific token",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Analytics"],
                "summary": "Get Token Logs",
                "parameters": [
                    {"type": "integer", "description": "Token ID", "name": "id", "in": "path", "required": true},
                    {"type": "integer", "description": "Limit results (default 100)", "name": "limit", "in": "query"}
                ],
                "responses": {
                    "200": {"description": "OK", "schema": {"type": "object", "additionalProperties": true}},
                    "400": {"description": "Bad Request", "schema": {"$ref": "#/definitions/models.ErrorResponse"}},
                    "500": {"description": "Internal Server Error", "schema": {"$ref": "#/definitions/models.ErrorResponse"}}
                }
            }
        },
        "/health": {
            "get": {
                "description": "Check the health status of the API and database connections",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Health"],
                "summary": "Health check",
                "responses": {
                    "200": {"description": "API is healthy", "schema": {"type": "object", "additionalProperties": true}},
                    "503": {"description": "Service unavailable", "schema": {"type": "object", "additionalProperties": true}}
                }
            }
        },
        "/ping": {
            "get": {
                "description": "Simple ping endpoint to check if the API is running",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "tags": ["Health"],
                "summary": "Ping",
                "responses": {
                    "200": {"description": "pong", "schema": {"type": "object", "additionalProperties": {"type": "string"}}}
                }
            }
        }
    },
    "definitions": {
        "models.DataRow": {
            "type": "object",
            "properties": {
                "terminal_id": {"type": "string", "example": "ATM-001"},
                "terminal_name": {"type": "string", "example": "Main Branch ATM"},
                "priority": {"type": "string", "example": "1.High"},
                "mode": {"type": "string", "example": "Off-line"},
                "initial_problem": {"type": "string", "example": "Cash dispenser jam"},
                "current_problem": {"type": "string", "example": "Card reader error"},
                "p_duration": {"type": "string", "example": "2h 30m"},
                "incident_start_datetime": {"type": "string", "example": "2024-01-15 10:30:00"},
                "count": {"type": "integer", "example": 5},
                "status": {"type": "string", "example": "0.NEW"},
                "remarks": {"type": "string", "example": "Waiting for technician"},
                "balance": {"type": "integer", "example": 1000000},
                "condition": {"type": "string", "example": "Critical"},
                "tickets_no": {"type": "string", "example": "TKT-2024-001"},
                "tickets_duration": {"type": "number", "example": 150.5},
                "open_time": {"type": "string", "example": "2024-01-15 08:00:00"},
                "close_time": {"type": "string", "example": "2024-01-15 18:00:00"},
                "problem_history": {"type": "string", "example": "Card reader issue resolved"},
                "mode_history": {"type": "string", "example": "Online->Offline->Online"},
                "dsp_flm": {"type": "string", "example": "FLM-001"},
                "dsp_slm": {"type": "string", "example": "SLM-001"},
                "last_withdrawal": {"type": "string", "example": "2024-01-15T09:30:00Z"},
                "export_name": {"type": "string", "example": "ATM_Report_Jan2024"},
                "flm_name": {"description": "From machine_master JOIN — mm.[FLM name]", "type": "string", "example": "AVT"},
                "flm": {"description": "From machine_master JOIN — mm.[FLM]", "type": "string", "example": "AVT - BANDUNG"},
                "slm": {"description": "From machine_master JOIN — mm.[SLM]", "type": "string", "example": "KGP - WINCOR DW"},
                "net": {"description": "From machine_master JOIN — mm.[Net]", "type": "string", "example": "NOSAIRIS"}
            }
        },
        "models.DataUpdateRequest": {
            "type": "object",
            "properties": {
                "priority": {"type": "string", "example": "1.High"},
                "mode": {"type": "string", "example": "Off-line"},
                "current_problem": {"type": "string", "example": "Card reader fixed"},
                "status": {"type": "string", "example": "2.Kirim FLM"},
                "remarks": {"type": "string", "example": "Technician dispatched"},
                "condition": {"type": "string", "example": "Normal"},
                "close_time": {"type": "string", "example": "2024-01-15 18:00:00"},
                "problem_history": {"type": "string", "example": "Card reader issue resolved"},
                "mode_history": {"type": "string", "example": "Online->Offline->Online"}
            }
        },
        "models.DataResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "data": {"$ref": "#/definitions/models.DataRow"}
            }
        },
        "models.DataListResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "data": {"type": "array", "items": {"$ref": "#/definitions/models.DataRow"}},
                "total": {"type": "integer"},
                "page": {"type": "integer"},
                "page_size": {"type": "integer"},
                "total_pages": {"type": "integer"}
            }
        },
        "models.MetadataResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean", "example": true},
                "message": {"type": "string", "example": "Metadata retrieved successfully"},
                "statuses": {"type": "array", "items": {"$ref": "#/definitions/models.StatusInfo"}},
                "modes": {"type": "array", "items": {"$ref": "#/definitions/models.ModeInfo"}},
                "priorities": {"type": "array", "items": {"$ref": "#/definitions/models.PriorityInfo"}},
                "last_updated": {"type": "string", "example": "2024-01-15T10:30:00Z"}
            }
        },
        "models.StatusInfo": {
            "type": "object",
            "properties": {
                "code": {"type": "string", "example": "0.NEW"},
                "description": {"type": "string", "example": "New ticket"},
                "is_documented": {"type": "boolean", "example": true}
            }
        },
        "models.ModeInfo": {
            "type": "object",
            "properties": {
                "code": {"type": "string", "example": "Off-line"},
                "description": {"type": "string", "example": "Terminal is offline"},
                "is_documented": {"type": "boolean", "example": true}
            }
        },
        "models.PriorityInfo": {
            "type": "object",
            "properties": {
                "code": {"type": "string", "example": "1.High"},
                "description": {"type": "string", "example": "High priority"},
                "is_documented": {"type": "boolean", "example": true}
            }
        },
        "models.ErrorResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean", "description": "Always false for errors", "example": false},
                "message": {"type": "string", "example": "Error message describing what went wrong"},
                "error": {"type": "string", "example": "detailed error information"}
            }
        },
        "models.APIToken": {
            "type": "object",
            "required": ["environment", "name"],
            "properties": {
                "id": {"type": "integer"},
                "token": {"description": "Only shown once during creation", "type": "string"},
                "token_prefix": {"type": "string"},
                "name": {"type": "string", "maxLength": 200, "minLength": 3},
                "description": {"type": "string"},
                "environment": {
                    "description": "Environment & Status",
                    "type": "string",
                    "enum": ["production", "staging", "development", "test"]
                },
                "vendor_name": {"description": "Human-readable vendor label (e.g. AVT)", "type": "string"},
                "filter_column": {"description": "Logical column key for WHERE clause (e.g. flm_name)", "type": "string"},
                "filter_value": {"description": "Value to match in the filter column (e.g. AVT)", "type": "string"},
                "is_super_token": {"description": "When true this token bypasses all vendor filters (Admin / Internal token)", "type": "boolean"},
                "is_active": {"type": "boolean"},
                "scopes": {"description": "Permissions & Scopes (stored as JSON in database)", "type": "string"},
                "ip_whitelist": {"description": "Security", "type": "string"},
                "rate_limit_per_minute": {"description": "Rate Limiting", "type": "integer"},
                "rate_limit_per_hour": {"type": "integer"},
                "rate_limit_per_day": {"type": "integer"},
                "expires_at": {"description": "Expiration", "type": "string", "example": "2024-12-31T23:59:59Z"},
                "last_used_at": {"description": "Usage Statistics", "type": "string", "example": "2024-02-15T10:30:00Z"},
                "last_used_endpoint": {"type": "string"},
                "last_used_ip": {"type": "string"},
                "total_requests": {"type": "integer"},
                "created_at": {"description": "Metadata", "type": "string"},
                "updated_at": {"type": "string"}
            }
        },
        "models.CreateTokenRequest": {
            "type": "object",
            "required": ["environment", "name"],
            "properties": {
                "name": {"type": "string", "maxLength": 200, "minLength": 3},
                "description": {"type": "string"},
                "environment": {
                    "type": "string",
                    "enum": ["production", "staging", "development", "test"]
                },
                "vendor_name": {"description": "Human-readable vendor label (e.g. AVT)", "type": "string"},
                "filter_column": {"description": "Logical column key (e.g. flm_name, flm, slm, net, terminal_id)", "type": "string"},
                "filter_value": {"description": "Value to match in the filter column (e.g. AVT)", "type": "string"},
                "is_super_token": {"description": "When true this token bypasses all vendor filters (Admin / Internal token)", "type": "boolean"},
                "scopes": {"description": "Will be converted to JSON", "type": "array", "items": {"type": "string"}},
                "ip_whitelist": {"description": "Will be converted to JSON", "type": "array", "items": {"type": "string"}},
                "rate_limit_per_minute": {"type": "integer"},
                "rate_limit_per_hour": {"type": "integer"},
                "rate_limit_per_day": {"type": "integer"},
                "expires_at": {"type": "string"}
            }
        },
        "models.UpdateTokenRequest": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "description": {"type": "string"},
                "vendor_name": {"description": "Human-readable vendor label (e.g. AVT)", "type": "string"},
                "filter_column": {"description": "Logical column key (e.g. flm_name)", "type": "string"},
                "filter_value": {"description": "Value to match in the filter column", "type": "string"},
                "is_super_token": {"description": "When true this token bypasses all vendor filters (Admin / Internal token)", "type": "boolean"},
                "scopes": {"type": "array", "items": {"type": "string"}},
                "ip_whitelist": {"type": "array", "items": {"type": "string"}},
                "rate_limit_per_minute": {"type": "integer"},
                "rate_limit_per_hour": {"type": "integer"},
                "rate_limit_per_day": {"type": "integer"},
                "expires_at": {"type": "string"}
            }
        },
        "models.CreateTokenResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "data": {"$ref": "#/definitions/models.APIToken"},
                "warning": {"description": "Save this token - it won't be shown again", "type": "string"}
            }
        },
        "models.TokenListResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "data": {"type": "array", "items": {"$ref": "#/definitions/models.APIToken"}},
                "total": {"type": "integer"}
            }
        },
        "models.TokenResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "data": {"$ref": "#/definitions/models.APIToken"}
            }
        },
        "models.LoginRequest": {
            "type": "object",
            "required": ["password", "username"],
            "properties": {
                "username": {"type": "string", "minLength": 3},
                "password": {"type": "string", "minLength": 6}
            }
        },
        "models.LoginResponse": {
            "type": "object",
            "properties": {
                "success": {"type": "boolean"},
                "message": {"type": "string"},
                "session_token": {"type": "string"},
                "expires_at": {"type": "string"},
                "user": {"$ref": "#/definitions/models.AdminUser"}
            }
        },
        "models.AdminUser": {
            "type": "object",
            "required": ["email", "role", "username"],
            "properties": {
                "id": {"type": "integer"},
                "username": {"type": "string", "maxLength": 100, "minLength": 3},
                "full_name": {"type": "string"},
                "email": {"type": "string"},
                "role": {"type": "string", "enum": ["super_admin", "admin", "viewer"]},
                "is_active": {"type": "boolean"},
                "last_login_at": {"type": "string", "example": "2024-01-01T12:00:00Z"},
                "last_login_ip": {"type": "string"},
                "created_at": {"type": "string"},
                "updated_at": {"type": "string"}
            }
        }
    },
    "securityDefinitions": {
        "ApiKeyAuth": {
            "description": "API token for authentication. Send in the X-API-Token header. Required for all /api/v1/data endpoints.",
            "type": "apiKey",
            "name": "X-API-Token",
            "in": "header"
        }
    }
}
