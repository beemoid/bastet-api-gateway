basePath: /api/v1
definitions:
  models.APIToken:
    properties:
      allowed_origins:
        description: JSON array
        type: string
      created_at:
        description: Metadata
        type: string
      created_by:
        type: integer
      description:
        type: string
      environment:
        description: Environment & Status
        enum:
        - production
        - staging
        - development
        - test
        type: string
      expires_at:
        description: Expiration
        example: "2024-12-31T23:59:59Z"
        type: string
      id:
        type: integer
      ip_whitelist:
        description: Security
        type: string
      is_active:
        type: boolean
      last_used_at:
        description: Usage Statistics
        example: "2024-02-15T10:30:00Z"
        type: string
      last_used_endpoint:
        type: string
      last_used_ip:
        type: string
      name:
        maxLength: 200
        minLength: 3
        type: string
      permissions:
        description: JSON object
        type: string
      rate_limit_per_day:
        type: integer
      rate_limit_per_hour:
        type: integer
      rate_limit_per_minute:
        description: Rate Limiting
        type: integer
      revoked_at:
        example: "2024-02-01T09:00:00Z"
        type: string
      revoked_by:
        type: integer
      revoked_reason:
        type: string
      scopes:
        description: Permissions & Scopes (stored as JSON in database)
        type: string
      token:
        description: Only shown once during creation
        type: string
      token_prefix:
        type: string
      total_requests:
        type: integer
      updated_at:
        type: string
    required:
    - environment
    - name
    type: object
  models.ATMI:
    properties:
      city_regency:
        description: City or regency name
        example: Jakarta Pusat
        type: string
      date_of_activation:
        description: Activation date (nullable)
        example: "2023-01-15T00:00:00Z"
        type: string
      district:
        description: District name
        example: Menteng
        type: string
      gps:
        description: GPS coordinates
        example: -6.200000,106.816666
        type: string
      lat:
        description: Latitude
        example: -6.2
        type: number
      lon:
        description: Longitude
        example: 106.816666
        type: number
      province:
        description: Province name
        example: DKI Jakarta
        type: string
      status:
        description: Operational status
        example: Active
        type: string
      std:
        description: Standard value
        example: 1
        type: integer
      store:
        description: Store name
        example: Main Branch
        type: string
      store_code:
        description: Store code
        example: STR-001
        type: string
      store_name:
        description: Full store name
        example: Jakarta Main Branch
        type: string
      terminal_id:
        description: Unique terminal identifier
        example: ATM-001
        type: string
    type: object
  models.AdminUser:
    properties:
      created_at:
        type: string
      created_by:
        type: integer
      email:
        type: string
      full_name:
        type: string
      id:
        type: integer
      is_active:
        type: boolean
      last_login_at:
        example: "2024-01-01T12:00:00Z"
        type: string
      last_login_ip:
        type: string
      role:
        enum:
        - super_admin
        - admin
        - viewer
        type: string
      updated_at:
        type: string
      username:
        maxLength: 100
        minLength: 3
        type: string
    required:
    - email
    - role
    - username
    type: object
  models.CreateTokenRequest:
    properties:
      allowed_origins:
        description: Will be converted to JSON
        items:
          type: string
        type: array
      description:
        type: string
      environment:
        enum:
        - production
        - staging
        - development
        - test
        type: string
      expires_at:
        type: string
      ip_whitelist:
        description: Will be converted to JSON
        items:
          type: string
        type: array
      name:
        maxLength: 200
        minLength: 3
        type: string
      rate_limit_per_day:
        type: integer
      rate_limit_per_hour:
        type: integer
      rate_limit_per_minute:
        type: integer
      scopes:
        description: Will be converted to JSON
        items:
          type: string
        type: array
    required:
    - environment
    - name
    type: object
  models.CreateTokenResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
      token:
        $ref: '#/definitions/models.APIToken'
      warning:
        description: '"Save this token - it won''t be shown again"'
        type: string
    type: object
  models.ErrorResponse:
    properties:
      error:
        description: Optional detailed error
        example: detailed error information
        type: string
      message:
        description: Error message
        example: Error message describing what went wrong
        type: string
      success:
        description: Always false for errors
        example: false
        type: boolean
    type: object
  models.FLMInfo:
    properties:
      area:
        example: BANDUNG
        type: string
      code:
        example: AVT - BANDUNG
        type: string
      description:
        example: AVT - BANDUNG
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.FLMNameInfo:
    properties:
      code:
        example: AVT
        type: string
      description:
        example: AVT
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.LoginRequest:
    properties:
      password:
        minLength: 6
        type: string
      username:
        minLength: 3
        type: string
    required:
    - password
    - username
    type: object
  models.LoginResponse:
    properties:
      expires_at:
        type: string
      message:
        type: string
      session_token:
        type: string
      success:
        type: boolean
      user:
        $ref: '#/definitions/models.AdminUser'
    type: object
  models.MachineListResponse:
    properties:
      data:
        description: Array of machines
        items:
          $ref: '#/definitions/models.ATMI'
        type: array
      message:
        description: Human-readable message
        type: string
      page:
        description: Current page number
        type: integer
      page_size:
        description: Items per page
        type: integer
      success:
        description: Indicates if operation was successful
        type: boolean
      total:
        description: Total count of machines
        type: integer
      total_pages:
        description: Total number of pages
        type: integer
    type: object
  models.MachineMetadataResponse:
    properties:
      flm_names:
        description: Available FLM provider names from database
        items:
          $ref: '#/definitions/models.FLMNameInfo'
        type: array
      flms:
        description: Available FLM providers from database
        items:
          $ref: '#/definitions/models.FLMInfo'
        type: array
      last_updated:
        description: When metadata was last refreshed
        example: "2024-01-15T10:30:00Z"
        type: string
      message:
        example: Machine metadata retrieved successfully
        type: string
      nets:
        description: Available network providers from database
        items:
          $ref: '#/definitions/models.NETInfo'
        type: array
      slms:
        description: Available SLM types from database
        items:
          $ref: '#/definitions/models.SLMInfo'
        type: array
      success:
        example: true
        type: boolean
    type: object
  models.MachineResponse:
    properties:
      data:
        allOf:
        - $ref: '#/definitions/models.ATMI'
        description: Machine data (if applicable)
      message:
        description: Human-readable message
        type: string
      success:
        description: Indicates if operation was successful
        type: boolean
    type: object
  models.MachineStatusUpdate:
    properties:
      gps:
        description: 'Optional: GPS coordinates'
        example: -6.200000,106.816666
        type: string
      lat:
        description: 'Optional: latitude'
        example: -6.2
        type: number
      lon:
        description: 'Optional: longitude'
        example: 106.816666
        type: number
      status:
        description: 'Required: new status'
        example: Active
        type: string
      terminal_id:
        description: 'Required: terminal to update'
        example: ATM-001
        type: string
    required:
    - status
    - terminal_id
    type: object
  models.MetadataResponse:
    properties:
      last_updated:
        description: When metadata was last refreshed
        example: "2024-01-15T10:30:00Z"
        type: string
      message:
        description: Response message
        example: Metadata retrieved successfully
        type: string
      modes:
        description: Available mode values from database
        items:
          $ref: '#/definitions/models.ModeInfo'
        type: array
      priorities:
        description: Available priority values from database
        items:
          $ref: '#/definitions/models.PriorityInfo'
        type: array
      statuses:
        description: Available status values from database
        items:
          $ref: '#/definitions/models.StatusInfo'
        type: array
      success:
        description: Operation success status
        example: true
        type: boolean
    type: object
  models.ModeInfo:
    properties:
      code:
        description: Mode code from database
        example: Off-line
        type: string
      description:
        description: Human-readable description
        example: Terminal is offline
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.NETInfo:
    properties:
      code:
        example: NOSAIRIS
        type: string
      description:
        example: NOSAIRIS
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.OpenTicket:
    properties:
      balance:
        description: Balance amount
        example: 1000000
        type: integer
      close_time:
        description: Ticket close time (nullable)
        example: "2024-01-15 18:00:00"
        type: string
      condition:
        description: Condition status (nullable)
        example: Critical
        type: string
      count:
        description: Count value
        example: 5
        type: integer
      current_problem:
        description: Current problem description (nullable)
        example: Card reader error
        type: string
      dsp_flm:
        description: DSP FLM identifier (nullable)
        example: FLM-001
        type: string
      dsp_slm:
        description: DSP SLM identifier (nullable)
        example: SLM-001
        type: string
      export_name:
        description: Export name for reports (nullable)
        example: ATM_Report_Jan2024
        type: string
      incident_start_datetime:
        description: Incident start timestamp (nullable)
        example: "2024-01-15 10:30:00"
        type: string
      initial_problem:
        description: Initial problem description (nullable)
        example: Cash dispenser jam
        type: string
      last_withdrawal:
        description: Last withdrawal timestamp (nullable)
        example: "2024-01-15T09:30:00Z"
        type: string
      mode:
        description: 'Terminal mode (nullable): Closed, In Service, nan, Off-line,
          Supervisor'
        example: Off-line
        type: string
      mode_history:
        description: Mode change history (nullable)
        example: Online->Offline->Online
        type: string
      open_time:
        description: Ticket open time (nullable)
        example: "2024-01-15 08:00:00"
        type: string
      p_duration:
        description: Problem duration (nullable)
        example: 2h 30m
        type: string
      priority:
        description: 'Priority level (nullable): 1.High, 2.Middle, 3.Low, 4.Minimum'
        example: 1.High
        type: string
      problem_history:
        description: Problem history (nullable)
        example: Card reader issue resolved
        type: string
      remarks:
        description: Remarks/notes (nullable)
        example: Waiting for technician
        type: string
      status:
        description: 'Ticket status (nullable): 0.NEW, 1.Req FD ke HD, 2.Kirim FLM,
          etc.'
        example: 0.NEW
        type: string
      terminal_id:
        description: Terminal identifier
        example: ATM-001
        type: string
      terminal_name:
        description: Terminal name
        example: Main Branch ATM
        type: string
      tickets_duration:
        description: Ticket duration in minutes (float)
        example: 150.5
        type: number
      tickets_no:
        description: Ticket number (nullable)
        example: TKT-2024-001
        type: string
    type: object
  models.PriorityInfo:
    properties:
      code:
        description: Priority code from database
        example: 1.High
        type: string
      description:
        description: Human-readable description
        example: High priority
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.SLMInfo:
    properties:
      code:
        example: KGP - WINCOR DW
        type: string
      description:
        example: KGP - WINCOR DW
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.StatusInfo:
    properties:
      code:
        description: Status code from database
        example: 0.NEW
        type: string
      description:
        description: Human-readable description
        example: New ticket
        type: string
      is_documented:
        description: Whether this value has documentation
        example: true
        type: boolean
    type: object
  models.TicketCreateRequest:
    properties:
      condition:
        description: 'Optional: condition'
        example: Critical
        type: string
      current_problem:
        description: 'Optional: current problem'
        example: Card reader error
        type: string
      export_name:
        description: 'Optional: export name'
        example: ATM_Report_Jan2024
        type: string
      incident_start_datetime:
        description: 'Optional: incident start time'
        example: "2024-01-15 10:30:00"
        type: string
      initial_problem:
        description: 'Required: initial problem'
        example: Cash dispenser jam
        type: string
      mode:
        description: 'Required: terminal mode (Closed, In Service, nan, Off-line,
          Supervisor)'
        example: Off-line
        type: string
      p_duration:
        description: 'Optional: problem duration'
        example: 2h 30m
        type: string
      priority:
        description: 'Required: priority level (1.High, 2.Middle, 3.Low, 4.Minimum)'
        example: 1.High
        type: string
      remarks:
        description: 'Optional: remarks'
        example: Waiting for technician
        type: string
      status:
        description: 'Optional: status (0.NEW, 1.Req FD ke HD, etc.)'
        example: 0.NEW
        type: string
      terminal_id:
        description: 'Required: terminal identifier'
        example: ATM-001
        type: string
      terminal_name:
        description: 'Required: terminal name'
        example: Main Branch ATM
        type: string
      tickets_no:
        description: 'Optional: ticket number'
        example: TKT-2024-001
        type: string
    required:
    - initial_problem
    - mode
    - priority
    - terminal_id
    - terminal_name
    type: object
  models.TicketListResponse:
    properties:
      data:
        description: Array of tickets
        items:
          $ref: '#/definitions/models.OpenTicket'
        type: array
      message:
        description: Human-readable message
        type: string
      page:
        description: Current page number
        type: integer
      page_size:
        description: Items per page
        type: integer
      success:
        description: Indicates if operation was successful
        type: boolean
      total:
        description: Total count of tickets
        type: integer
      total_pages:
        description: Total number of pages
        type: integer
    type: object
  models.TicketResponse:
    properties:
      data:
        allOf:
        - $ref: '#/definitions/models.OpenTicket'
        description: Ticket data (if applicable)
      message:
        description: Human-readable message
        type: string
      success:
        description: Indicates if operation was successful
        type: boolean
    type: object
  models.TicketUpdateRequest:
    properties:
      close_time:
        description: 'Optional: set close time'
        example: "2024-01-15 18:00:00"
        type: string
      condition:
        description: 'Optional: update condition'
        example: Normal
        type: string
      current_problem:
        description: 'Optional: update current problem'
        example: Card reader fixed
        type: string
      mode:
        description: 'Optional: update mode (Closed, In Service, nan, Off-line, Supervisor)'
        example: Off-line
        type: string
      mode_history:
        description: 'Optional: update mode history'
        example: Online->Offline->Online
        type: string
      priority:
        description: 'Optional: update priority (1.High, 2.Middle, 3.Low, 4.Minimum)'
        example: 1.High
        type: string
      problem_history:
        description: 'Optional: update problem history'
        example: Card reader issue resolved
        type: string
      remarks:
        description: 'Optional: update remarks'
        example: Issue resolved
        type: string
      status:
        description: 'Optional: update status (0.NEW, 1.Req FD ke HD, etc.)'
        example: 0.NEW
        type: string
    type: object
  models.TokenListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.APIToken'
        type: array
      message:
        type: string
      success:
        type: boolean
      total:
        type: integer
    type: object
  models.TokenResponse:
    properties:
      data:
        $ref: '#/definitions/models.APIToken'
      message:
        type: string
      success:
        type: boolean
    type: object
  models.UpdateTokenRequest:
    properties:
      allowed_origins:
        items:
          type: string
        type: array
      description:
        type: string
      expires_at:
        type: string
      ip_whitelist:
        items:
          type: string
        type: array
      name:
        type: string
      rate_limit_per_day:
        type: integer
      rate_limit_per_hour:
        type: integer
      rate_limit_per_minute:
        type: integer
      scopes:
        items:
          type: string
        type: array
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
    url: http://www.example.com/support
  description: This API Gateway serves as middleware between on-premise databases
    and cloud applications, providing RESTful APIs for ticket and machine management.
  license:
    name: Proprietary
    url: http://www.example.com/license
  termsOfService: http://swagger.io/terms/
  title: API Gateway for On-Premise to Cloud Communication
  version: "1.0"
paths:
  /admin/analytics/daily:
    get:
      consumes:
      - application/json
      description: Get daily request volume
      parameters:
      - description: Number of days (default 30)
        in: query
        name: days
        type: integer
      - description: Filter by Token ID
        in: query
        name: token_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Daily Usage
      tags:
      - Analytics
  /admin/analytics/dashboard:
    get:
      consumes:
      - application/json
      description: Get overview statistics for the admin dashboard
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Dashboard Stats
      tags:
      - Analytics
  /admin/analytics/endpoints:
    get:
      consumes:
      - application/json
      description: Get usage statistics by endpoint
      parameters:
      - description: Number of days (default 7)
        in: query
        name: days
        type: integer
      - description: Limit results (default 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Endpoint Stats
      tags:
      - Analytics
  /admin/analytics/tokens/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed analytics for a specific token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      - description: Number of days (default 7)
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Token Analytics
      tags:
      - Analytics
  /admin/audit-logs:
    get:
      consumes:
      - application/json
      description: Get administrative audit logs
      parameters:
      - description: Limit results (default 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Audit Logs
      tags:
      - Admin Auth
  /admin/auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate admin user and return session token
      parameters:
      - description: Login Credentials
        in: body
        name: login
        required: true
        schema:
          $ref: '#/definitions/models.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.LoginResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Admin Login
      tags:
      - Admin Auth
  /admin/auth/logout:
    post:
      consumes:
      - application/json
      description: Invalidate current session
      parameters:
      - description: Session Token
        in: header
        name: X-Session-Token
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Admin Logout
      tags:
      - Admin Auth
  /admin/auth/me:
    get:
      consumes:
      - application/json
      description: Get details of currently logged in admin
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Get Current User
      tags:
      - Admin Auth
  /admin/tokens:
    get:
      consumes:
      - application/json
      description: Get all API tokens
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TokenListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: List API Tokens
      tags:
      - Token Management
    post:
      consumes:
      - application/json
      description: Create a new API token
      parameters:
      - description: Token Details
        in: body
        name: token
        required: true
        schema:
          $ref: '#/definitions/models.CreateTokenRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.CreateTokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Create API Token
      tags:
      - Token Management
  /admin/tokens/{id}:
    delete:
      consumes:
      - application/json
      description: Permanently delete an API token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Delete API Token
      tags:
      - Token Management
    get:
      consumes:
      - application/json
      description: Get details of a specific API token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get API Token
      tags:
      - Token Management
    put:
      consumes:
      - application/json
      description: Update details of an existing API token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      - description: Update Details
        in: body
        name: token
        required: true
        schema:
          $ref: '#/definitions/models.UpdateTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Update API Token
      tags:
      - Token Management
  /admin/tokens/{id}/disable:
    patch:
      consumes:
      - application/json
      description: Temporarily disable an API token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Disable API Token
      tags:
      - Token Management
  /admin/tokens/{id}/enable:
    patch:
      consumes:
      - application/json
      description: Re-enable a disabled API token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Enable API Token
      tags:
      - Token Management
  /admin/tokens/{id}/logs:
    get:
      consumes:
      - application/json
      description: Get access logs for a specific token
      parameters:
      - description: Token ID
        in: path
        name: id
        required: true
        type: integer
      - description: Limit results (default 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get Token Logs
      tags:
      - Analytics
  /health:
    get:
      consumes:
      - application/json
      description: Check the health status of the API and database connections
      produces:
      - application/json
      responses:
        "200":
          description: API is healthy
          schema:
            additionalProperties: true
            type: object
        "503":
          description: Service unavailable
          schema:
            additionalProperties: true
            type: object
      summary: Health check
      tags:
      - Health
  /machines:
    get:
      consumes:
      - application/json
      description: Retrieve all machines/terminals from the system. Supports pagination
        via query params.
      parameters:
      - description: 'Page number (default: all results)'
        in: query
        minimum: 1
        name: page
        type: integer
      - description: 'Items per page (default: 100, max: 500)'
        in: query
        maximum: 500
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of machines retrieved successfully
          schema:
            $ref: '#/definitions/models.MachineListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get all machines
      tags:
      - Machines
  /machines/{terminal_id}:
    get:
      consumes:
      - application/json
      description: Retrieve a specific machine by its terminal ID
      parameters:
      - description: Terminal ID
        in: path
        name: terminal_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Machine retrieved successfully
          schema:
            $ref: '#/definitions/models.MachineResponse'
        "404":
          description: Machine not found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get machine by terminal ID
      tags:
      - Machines
  /machines/branch/{branch_code}:
    get:
      consumes:
      - application/json
      description: Retrieve all machines for a specific store code
      parameters:
      - description: Store Code
        in: path
        name: branch_code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Machines retrieved successfully
          schema:
            $ref: '#/definitions/models.MachineListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get machines by store code
      tags:
      - Machines
  /machines/metadata:
    get:
      consumes:
      - application/json
      description: |-
        Retrieve all valid values for machine SLM, FLM, NET, and FLM Name fields from the database
        Values are cached for 1 hour for performance. New values automatically appear after cache refresh.
      produces:
      - application/json
      responses:
        "200":
          description: Metadata retrieved successfully
          schema:
            $ref: '#/definitions/models.MachineMetadataResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get machine metadata
      tags:
      - Machines
  /machines/search:
    get:
      consumes:
      - application/json
      description: Search machines using multiple filter criteria
      parameters:
      - description: Filter by status
        in: query
        name: status
        type: string
      - description: Filter by store code
        in: query
        name: store_code
        type: string
      - description: Filter by province
        in: query
        name: province
        type: string
      - description: Filter by city/regency
        in: query
        name: city_regency
        type: string
      - description: Search by district (partial match)
        in: query
        name: district
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Search completed successfully
          schema:
            $ref: '#/definitions/models.MachineListResponse'
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Search machines
      tags:
      - Machines
  /machines/status:
    patch:
      consumes:
      - application/json
      description: Update the operational status of a machine
      parameters:
      - description: Machine status update data
        in: body
        name: machine
        required: true
        schema:
          $ref: '#/definitions/models.MachineStatusUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: Machine status updated successfully
          schema:
            $ref: '#/definitions/models.MachineResponse'
        "400":
          description: Invalid request data
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update machine status
      tags:
      - Machines
  /machines/status/{status}:
    get:
      consumes:
      - application/json
      description: Retrieve all machines with a specific operational status
      parameters:
      - description: Machine Status
        enum:
        - Active
        - Inactive
        - Maintenance
        - Offline
        in: path
        name: status
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Machines retrieved successfully
          schema:
            $ref: '#/definitions/models.MachineListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get machines by status
      tags:
      - Machines
  /ping:
    get:
      consumes:
      - application/json
      description: Simple ping endpoint to check if the API is running
      produces:
      - application/json
      responses:
        "200":
          description: pong
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Ping
      tags:
      - Health
  /tickets:
    get:
      consumes:
      - application/json
      description: Retrieve all tickets from the system. Supports pagination via query
        params.
      parameters:
      - description: 'Page number (default: all results)'
        in: query
        minimum: 1
        name: page
        type: integer
      - description: 'Items per page (default: 100, max: 500)'
        in: query
        maximum: 500
        minimum: 1
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of tickets retrieved successfully
          schema:
            $ref: '#/definitions/models.TicketListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get all tickets
      tags:
      - Tickets
    post:
      consumes:
      - application/json
      description: Create a new ticket in the system
      parameters:
      - description: Ticket creation data
        in: body
        name: ticket
        required: true
        schema:
          $ref: '#/definitions/models.TicketCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Ticket created successfully
          schema:
            $ref: '#/definitions/models.TicketResponse'
        "400":
          description: Invalid request data
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "409":
          description: Ticket number already exists
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Create a new ticket
      tags:
      - Tickets
  /tickets/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve a specific ticket by its terminal ID
      parameters:
      - description: Terminal ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Ticket retrieved successfully
          schema:
            $ref: '#/definitions/models.TicketResponse'
        "404":
          description: Ticket not found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get ticket by terminal ID
      tags:
      - Tickets
    put:
      consumes:
      - application/json
      description: Update an existing ticket by terminal ID
      parameters:
      - description: Terminal ID
        in: path
        name: id
        required: true
        type: string
      - description: Ticket update data
        in: body
        name: ticket
        required: true
        schema:
          $ref: '#/definitions/models.TicketUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Ticket updated successfully
          schema:
            $ref: '#/definitions/models.TicketResponse'
        "400":
          description: Invalid request data
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update a ticket
      tags:
      - Tickets
  /tickets/metadata:
    get:
      consumes:
      - application/json
      description: |-
        Retrieve all valid values for ticket status, mode, and priority fields from the database
        Values are cached for 1 hour for performance. New values automatically appear after cache refresh.
      produces:
      - application/json
      responses:
        "200":
          description: Metadata retrieved successfully
          schema:
            $ref: '#/definitions/models.MetadataResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get ticket metadata
      tags:
      - Tickets
  /tickets/number/{number}:
    get:
      consumes:
      - application/json
      description: Retrieve a ticket by its unique ticket number
      parameters:
      - description: Ticket Number
        in: path
        name: number
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Ticket retrieved successfully
          schema:
            $ref: '#/definitions/models.TicketResponse'
        "404":
          description: Ticket not found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get ticket by number
      tags:
      - Tickets
  /tickets/status/{status}:
    get:
      consumes:
      - application/json
      description: Retrieve all tickets with a specific status
      parameters:
      - description: Ticket Status
        enum:
        - 0.NEW
        - 1.Req FD ke HD
        - 2.Kirim FLM
        - 21.Req Replenish
        - 3.SLM
        - 4.SLM-Net
        - 5.Menunggu Update
        - 6.Follow-up Sales team
        - 8.Wait transaction
        in: path
        name: status
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tickets retrieved successfully
          schema:
            $ref: '#/definitions/models.TicketListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get tickets by status
      tags:
      - Tickets
  /tickets/terminal/{terminal_id}:
    get:
      consumes:
      - application/json
      description: Retrieve all tickets associated with a specific terminal
      parameters:
      - description: Terminal ID
        in: path
        name: terminal_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tickets retrieved successfully
          schema:
            $ref: '#/definitions/models.TicketListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get tickets by terminal
      tags:
      - Tickets
securityDefinitions:
  ApiKeyAuth:
    description: API key for authentication. Required for all endpoints except /health
      and /ping.
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
